Plasma Language TODO
====================
Paul Bone <paul@plasmalang.org>
v0.1, Feburary 2016: Always a draft.
Copyright (C) 2016 Plasma Team
License: CC BY-SA 4.0

While the roadmap on the website provides an overview of the project's
progress.  This file lists specific tasks, and is more-or-less an aide to
memory.

== TODO Items

These items are things that can be done almost right away.  They don't have
anything major blocking them and won't distract from the roadmap too much.

=== Bugs

=== Non-code tasks

* Update style guide for better vim settings based on work discussion
* Compare and make notes about process calculi

=== pzrun

* Allow mutual references (works for procedures but not for data).
* Consider removing the proc/block distinction, use tailcalls to implement
  "fall through" after a condition.
* How will PZ modules and namespaces work?

=== plasmac

* Generate compiler errors rather than throw exceptions
* Create a new exception type for compile errors that are currently handled as
  exceptions and use it instead of other exception types.  Eventually these
  should not be exceptions at all.
* Refactor typecheck to attach types to variables, and not expressions.
* Write AST pretty-printer
* Fix Core pretty-printer (it's quite ugly).

==== Semantic analysis

* Type errors
* Check that a statement does not use any resource more than once, including
  related resources.
* Resource usage checking
* Variable scope check: cannot bind in some expression contexts like the
  arguments of a call.
* Variable scope check: variables visible outside of an ITE/Switch arm must
  be bound on all execution paths.
* function parameters are named apart check.
* Coverage in pattern matches (overlapping and uncovered items).

=== pzasm

(No current pzasm tasks.)

=== Build system

NOTE: I want to avoid using autoconf.  But as things get more complex using
http://msteveb.github.io/autosetup[Autosetup] may be an option.

* Create separate configurations for each major platform / OS / OS
  distribution / version.  Include these from another "config.h" header and
  the main Makefile
* With a simple configure script symlink or copy the correct configuration
  files into place.

== TODO later tasks

These tasks should not be done now.  They're either blocked by something
major or would distract from more immediate goals.

=== Relax the Plasma language

* Currently procedures require a type signature, allow inference for
  module-local procedures.
* Currently diverging code (cases, ITE) all branches must either "return" or
  not return.  This should be relaxed.
* Allow pattern matching against multiple expressions at once.

=== Optimisations

* Convert ANF->relaxed ANF->PZ and optimise one-use variables in the
  relaxed ANF so that the resulting PZ code has fewer stack manipulations.
* Consider a more SSA-like representation before generating PZ.  Or maybe
  make this part of PZ or relaxed ANF.  Use this with a dependency graph to
  schedule parallel tasks.  SSANF?

== Ideas to consider

GC::
  * Regions
  * Mark-compact for acyclic objects

Types::
  * Use structural matching to some degree, an instance can implement more
    than one interface, and may define more than an interface requires.
  * When supporting interfaces, maybe they can be integrated with the
    package system in a kind-of "does this package provide X?"


